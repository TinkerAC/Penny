# Guide

## 目录

1.准备 服务端 程序

Penny 是一个全栈项目, 为了 完整的体验， 你需要下载预构建的应用程序 或者 从源代码构建服务端 应用程序

1. 准备服务端程序
   1.1 如果 下载预构建的应用程序

1.从release 页面下载最新的服务端程序penny_server.jar
2.为了能在您的环境中运行服务端程序，您可能需要解压缩penny_server.jar并修改配置文件,他们位于penny_server.jar的同一目录下的application.conf文件
3.按照和源代码构建服务端程序相同的步骤修改配置文件,然后运行

```shell
jar cvfm penny_server.jar META-INF/MANIFEST.MF -C penny_server/ .
```

来重新打包服务端程序

4.在penny_server.jar的目录下运行以下命令

```
java -jar penny_server.jar
```

服务端程序应当会启动,并在你的本地局域网内监听请求

1.2 从源代码构建服务端应用程序

1. 根据Readme.md中的说明，克隆项目
2. 转到`server/src/main/resources`目录
3. 修改port、database、openai 块的配置 (最小只需要修改database 为你当前环境的mysql数据库配置)
4. 在指定的数据库中创建一个名为`penny_server`的数据库,exposed ORM 应当会在启动时自动创建表
   5.在项目根目录运行以下命令
    ```
    ./gradlew :server:packageServer
    ```
   运行完毕后, 你会在 `server/build/libs/` 目录下找到 `server-all.jar` 文件
5. 在可执行jar 文件的目录下运行以下命令
    ```
    java -jar server-all.jar
    ```
   服务端程序应当会启动,并在你的本地局域网内监听请求

你当然也可以将服务端程序部署到云服务器上, 但是请注意, 服务端程序的默认配置是不安全的,
请在生产环境中修改配置文件以确保安全性

2.客户端程序介绍

进入程序,你应当会看到onBoarding 页面, 你可以选择登录或者注册
, 也可以选择跳过这一步（使用本地账户继续),
然后初始化你的第一个账本
但是任何与服务器的交互都将无法使用
为了体验核心功能,建议您注册一个账户并登录

2.1 程序核心功能体验流程：

1.注册账户: 在onBoarding 页面点击注册,输入用户名、邮箱、密码,点击注册,程序应当会自动登录并跳转到主页
2.记账业务: 在首页中点击卡片中间的的"Add a Transaction"按钮,在顶端栏确定交易类型(Expense/Income)
然后在分类Grid 中选择Primary Category, 然后在Secondary Category中选择次级分类
点击右下角的Floating Action Button,输入金额,
备注(可选),
日期,
点击保存,程序应当会自动将交易添加到您的账本中并自动退出NewTransaction 界面
edit Transaction: 在首页中点击卡片中的交易即可进入编辑界面,在这里您可以修改、删除交易
3.查看Profile 界面,您可以在这里查看您的账户信息,以及一些功能列表

点击头像,您可以重新弹出登陆界面，头像应当显示为您的Gravatar头像

,Notifications(未实现):允许您设置一些提醒,例如预算达到一定数值时提醒，和每日记账提醒等
MyLedger :您可以在这里查看您的账本,以及一些统计信息,
您可以在这里新增、修改、删除账本，或者将账本设置为默认账本(通过点击右上角的"...")
Penny's Box :这里收录了一些金融相关的实用工具,例如汇率计算器、贷款计算器等
-汇率计算器:
您可以在这里查看各种货币的实时汇率,并且可以在这里进行货币兑换,数据源来源于"https://open.er-api.com/"
-贷款计算器:您可以在这里计算贷款的还款计划,输入贷款金额、年利率、还款期限,点击计算,程序会自动计算出还款计划
Settings:您可以在这里修改一些设置,

- Language :程序完整的支持英文中文和,您可以在这里切换语言,然后退出当前Screen,程序应当已经显示您选择的语言
- ThemeColor :程序实现了4种静态主题和动态主题,静态的主题颜色是固定的,您可以在展开的gallery中选择您喜欢的颜色并选择
    - 静态主题:1.TerracottaRed 2.SkyBlue 3.AppleGreen 4.LemonYellow
    - 动态主题:您可以在弹出的颜色选择器中选择您喜欢的颜色将其做为主题色(个人主观审美推荐颜色:
      blueViolet 、)
- DisplayMode :您可以在这里选择您的账本的显示模式 ,包括深色模式\浅色模式\跟随系统模式
- 对比度:当启用静态主题时,您可以在这里选择对比度(高、中、低)

AutoCloudSync :当您登陆后,您可以在这里开启自动云同步,程序会在启动时自动同步您的账本数据

- 关于:您可以在这里查看程序的版本号、开发者信息、以及一些开源许可证信息

2.您可以自由浏览当前的空账本,但是为了体验核心功能,您需要添加一些交易，这也是为什么我准备了DebugScreen,您可以在这里做一些调试操作
转到ProfileScreen,长按齿轮图标,您会进入DebugScreen（短按会进入正常的设置界面）

在InsertRandomTransaction中,您可以插入一些随机交易,这些交易将会被插入到您的账本,在过去7天到5年内的时间范围内
一些推荐的组合:
(20,7)
(50 ,30 )
(500,365)...

3. 深入了解 TransactionScreen
   1.列表视图
   在有了足够的数据后，您可以更好的体验TransactionScreen,这里是您的账本的核心,您可以在这里查看您的账本,以及一些统计信息
   1.TransactionScreen 基本上是一个您当前默认账本中的记录的分组聚合,您可以点击左上角的Filter Chip
   DropDown ，选择您想要的分组依据,目前支持(Time(Day,Week,Month,Season,Year),Category(
   Primary,Secondary))
   2.您可以点击分组来展开或者收起分组,并点击其中展示的交易记录来查看详情
    2. 日历视图
       您可以点击右上角的Icon 来将视图切换到日历视图,在这里您可以查看您的账本的日历视图,并且可以在这里查看您的交易记录

4.深入了解 AnalyticScreen
Analytic 界面是一个数据可视化的界面,您可以在这里查看您的账本的统计信息,包括您的总收入、总支出、总余额,以及您的交易记录的分布情况
您可以在顶端栏选择您想要查看的时间范围,recent （最近的7天）,month、Year 和Custom(自定义时间范围)

点击右上角的账本Icon ，您可以临时切换账本

程序会根据选定的时间段，生成下列图表:
1.IncomeExpenseTrendChart: 这是一个折线图,显示了您的收入和支出的趋势
2.CategoryPieChart: 这是一个饼图,显示了您的交易记录的分类分布情况，您可以点击右上角的SlideToggle来切换显示收入或者支出的分类分布
3.AssetDailyChangeTable: 这是一个表格,显示了您的每日资产变化情况

5.深入了解AIChatScreen
点击底部导航栏中间的SparkIcon ,您会进入AIChat 界面,
在这里,您可以使用自然语言执行一些自动化操作:

- 1.文本模式:
  当前支持的指令有:
  1.自然语言记账:您可以使用自然语言来记账,例如"我在星巴克花了10块钱"
  ，程序会自动识别您的交易类型、金额、日期、备注等信息您只需要点击"确认"按钮即可,如果AI没有完整推断出您的意图,程序会提示您补充信息
  2.创建月报:您可以使用自然语言来创建月报,例如"我想看一下这个月的账单"
  ，程序会自动为您生成一个月报,包括您本月的总收入、总支出、总余额,以及最近的交易
  3.创建账本:您可以使用自然语言来创建账本,例如"我想创建一个账本叫做我的账本,用来记录我的日常开支"
  ，程序会自动为您创建一个账本,您只需要点击"确认"按钮即可
  4.同步数据:您可以使用自然语言来同步数据,例如"我想同步我的数据"，程序会自动为您同步数据
  5.日常聊天:所有未识别的指令都会被当做日常聊天,程序会尽量回答您的问题,但是AI的能力有限,可能无法回答所有问题

- 2 .语音模式:
- 所有上述的指令都可以通过语音输入来执行,您只需要点击左下角的麦克风按钮,然后说出您的指令即可

> Note:程序在第一次使用的时候,可能会要求您授权麦克风权限，请耐心等待提示弹出并点击授予,程序才能正常使用语音识别功能
> 如果AI没有回复,可能是网络原因或初始化问题,请多试几次
>

6.